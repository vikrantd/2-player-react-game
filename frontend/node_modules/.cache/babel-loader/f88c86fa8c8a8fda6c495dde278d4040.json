{"ast":null,"code":"var _jsxFileName = \"/Users/vicky/workspace/2-player-react-game/frontend/src/App.js\";\nimport React from 'react';\nimport Pilot from './Pilot';\nimport Gun from './Gun';\nimport Player from './Player';\nimport Info from './Info';\nimport openSocket from 'socket.io-client';\nconst socket = openSocket('http://localhost:55550');\nvar id;\nvar keyCodeTimestamps = {};\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.frameUpdate = () => {\n      if (!this.state.isPaused) {\n        this.setState(prev => {\n          let p1 = prev.p1score;\n          let p2 = prev.p2score;\n          const speed = prev.key39 ? 8 : 5;\n          let pos = prev.pilotpos + speed;\n          const dec = prev.key40 ? 1 : 0;\n          let newdepth = prev.pilotdepth + dec;\n          let depth = newdepth >= 150 ? 150 : newdepth;\n          let newpilot = prev.pilotnum;\n          let soldarr = prev.soldiers.map(item => {\n            if (item[0]) {\n              let soldepth = item[2] + 4;\n\n              if (item[2] < 700 && soldepth >= 700) {\n                if (prev.round === 1) {\n                  p1 += 2;\n                }\n\n                if (prev.round === 2) {\n                  p2 += 2;\n                }\n              }\n\n              soldepth = soldepth >= 700 ? 700 : soldepth;\n              return [true, item[1], soldepth];\n            } else {\n              return item;\n            }\n          });\n          let gunangle = prev.gunangle;\n\n          if (prev.key65) {\n            gunangle -= 2;\n          }\n\n          if (prev.key68) {\n            gunangle += 2;\n          }\n\n          gunangle = gunangle >= 90 ? 90 : gunangle;\n          gunangle = gunangle <= -90 ? -90 : gunangle;\n          let newbullets = prev.bullets.map(item => [item[0] + 10 * item[2], item[1] - 10 * item[3], item[2], item[3]]);\n          newbullets = newbullets.filter(item => item[0] < 1550 && item[0] > 0 && item[1] > 0);\n          let newreleased = prev.soldiersReleased;\n\n          if (pos > prev.frameEndPos && newpilot < 4) {\n            pos = prev.frameStartPos;\n            depth = 10;\n            newpilot += 1;\n            newreleased = newpilot * 4;\n          }\n\n          if (pos > prev.frameEndPos && newpilot === 4) {\n            if (prev.round === 1) {\n              let arr = [];\n\n              for (let k = 0; k < 20; k++) {\n                arr.push([false, 0, 10]);\n              }\n\n              prev.isPaused = true;\n              return {\n                p1score: p1,\n                p2score: p2,\n                round: 2,\n                pilotpos: prev.frameStartPos,\n                pilotdepth: 10,\n                pilotnum: 0,\n                key39: false,\n                key40: false,\n                key65: false,\n                key68: false,\n                key76: false,\n                soldiers: arr,\n                soldiersReleased: 0,\n                gunangle: 0,\n                bullets: []\n              };\n            }\n\n            if (prev.round === 2) {\n              const str = p1 > p2 ? 1 : 2;\n              prev.isGameOver = true;\n              prev.isPaused = true;\n            }\n          }\n\n          let c = 0;\n\n          for (let it = 0; it < soldarr.length; it++) {\n            if (soldarr[it][0] && soldarr[it][2] >= 700) {\n              c++;\n            }\n          }\n\n          if (c >= 4) {\n            if (prev.round === 1) {\n              p1 += 50;\n              let arr = [];\n\n              for (let k = 0; k < 20; k++) {\n                arr.push([false, 0, 10]);\n              }\n\n              prev.isPaused = true;\n              return {\n                p1score: p1,\n                p2score: p2,\n                round: 2,\n                pilotpos: prev.frameStartPos,\n                pilotdepth: 10,\n                pilotnum: 0,\n                key39: false,\n                key40: false,\n                key65: false,\n                key68: false,\n                key76: false,\n                soldiers: arr,\n                soldiersReleased: 0,\n                gunangle: 0,\n                bullets: []\n              };\n            }\n\n            if (prev.round === 2) {\n              p2 += 50;\n              const str = p1 > p2 ? 1 : 2;\n              alert('Player 1: ' + p1 + '    Player 2: ' + p2);\n              alert('Game Over!! Payer ' + str + ' wins! Plese Refresh');\n              clearInterval(id);\n            }\n          }\n\n          for (let i = 0; i < newbullets.length; i++) {\n            for (let j = 0; j < soldarr.length; j++) {\n              if (soldarr[j][0] && soldarr[j][2] < 700 && Math.abs(newbullets[i][0] - soldarr[j][1]) < 10 && Math.abs(newbullets[i][1] - soldarr[j][2]) < 10) {\n                soldarr[j][0] = false;\n\n                if (prev.round === 1) {\n                  p2 += 1;\n                }\n\n                if (prev.round === 2) {\n                  p1 += 1;\n                }\n              }\n            }\n\n            if (Math.abs(newbullets[i][0] - pos) < 30 && Math.abs(newbullets[i][1] - depth) < 10) {\n              if (prev.round === 1) {\n                p2 += 5;\n              }\n\n              if (prev.round === 2) {\n                p1 += 5;\n              }\n\n              newbullets.splice(i, 1);\n\n              if (newpilot === 4 && prev.round === 1) {\n                let arr = [];\n\n                for (let k = 0; k < 20; k++) {\n                  arr.push([false, 0, 10]);\n                }\n\n                depth = -500;\n                prev.isPaused = true;\n                return {\n                  p1score: p1,\n                  p2score: p2,\n                  round: 2,\n                  pilotpos: prev.frameStartPos,\n                  pilotdepth: 10,\n                  pilotnum: 0,\n                  key39: false,\n                  key40: false,\n                  key65: false,\n                  key68: false,\n                  key76: false,\n                  soldiers: arr,\n                  soldiersReleased: 0,\n                  gunangle: 0,\n                  bullets: []\n                };\n              }\n\n              if (newpilot === 4 && prev.round === 2) {\n                depth = -500;\n                const str = p1 > p2 ? 1 : 2;\n                alert('Player 1: ' + p1 + '    Player 2: ' + p2);\n                alert('Game Over!! Payer ' + str + ' wins! Plese Refresh');\n                clearInterval(id);\n              }\n\n              if (newpilot < 4) {\n                pos = prev.frameStartPos;\n                depth = 10;\n                newpilot += 1;\n                newreleased = newpilot * 4;\n              }\n            }\n          }\n\n          return {\n            pilotpos: pos,\n            pilotdepth: depth,\n            pilotnum: newpilot,\n            soldiers: soldarr,\n            gunangle: gunangle,\n            bullets: newbullets,\n            p1score: p1,\n            p2score: p2,\n            soldiersReleased: newreleased\n          };\n        });\n      }\n    };\n\n    let gameWindowWidth = 800;\n    let _arr = [];\n\n    for (let i = 0; i < 20; i++) {\n      _arr.push([false, 0, 10]);\n    }\n\n    this.state = {\n      p1score: 0,\n      p2score: 0,\n      round: 1,\n      pilotpos: (window.innerWidth - gameWindowWidth) / 2,\n      pilotdepth: 10,\n      pilotnum: 0,\n      key39: false,\n      key40: false,\n      key65: false,\n      key68: false,\n      key76: false,\n      soldiers: _arr,\n      soldiersReleased: 0,\n      gunangle: 0,\n      bullets: [],\n      frameStartPos: 0,\n      frameEndPos: gameWindowWidth,\n      gameWidth: gameWindowWidth,\n      isPaused: true,\n      isGameOver: false\n    };\n    this.resume = this.resume.bind(this);\n  }\n\n  resume() {\n    this.setState({\n      isPaused: false\n    });\n  }\n\n  componentDidMount() {\n    id = setInterval(this.frameUpdate, 40);\n\n    document.onkeydown = e => {\n      const keyname = 'key' + e.keyCode;\n\n      if ((e.keyCode === 39 || e.keyCode === 40 || e.keyCode === 68 || e.keyCode === 65) && !this.state.isPaused) {\n        this.setState({\n          [keyname]: true\n        });\n        keyCodeTimestamps[keyname] = {};\n        keyCodeTimestamps[keyname].startTimeStamp = Date.now();\n      } else if (e.keyCode === 32 || e.keyCode === 76) {\n        keyCodeTimestamps[keyname] = {};\n        keyCodeTimestamps[keyname].startTimeStamp = Date.now();\n      }\n    };\n\n    document.onkeyup = e => {\n      const keyname = 'key' + e.keyCode;\n\n      if (!this.state.isPaused && e.keyCode === 76 && this.state.soldiersReleased < this.state.pilotnum * 4 + 4) {\n        this.setState(prev => {\n          let newlist = prev.soldiers.map(item => item);\n          newlist[prev.soldiersReleased] = [true, prev.pilotpos, prev.pilotdepth];\n          return {\n            soldiersReleased: prev.soldiersReleased + 1,\n            soldiers: newlist\n          };\n        });\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 2\" : \"Player 1\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if (!this.state.isPaused && e.keyCode === 32) {\n        this.setState(prev => {\n          let bull = prev.bullets;\n          const deg = this.state.gunangle * Math.PI / 180;\n          bull.push([this.state.frameStartPos + this.state.gameWidth / 2, 700, Math.sin(deg), Math.cos(deg)]);\n          return {\n            bullets: bull\n          };\n        });\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 1\" : \"Player 2\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if (!this.state.isPaused && (e.keyCode === 39 || e.keyCode === 40)) {\n        const keyname = 'key' + e.keyCode;\n        this.setState({\n          [keyname]: false\n        });\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 2\" : \"Player 1\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if (!this.state.isPaused && (e.keyCode === 68 || e.keyCode === 65)) {\n        const keyname = 'key' + e.keyCode;\n        this.setState({\n          [keyname]: false\n        });\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 1\" : \"Player 2\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n    };\n  }\n\n  render() {\n    let tempsoldierArr = this.state.soldiers.map(item => {\n      const elem = item[0] ? React.createElement(\"div\", {\n        className: \"soldier\",\n        key: item,\n        style: {\n          position: 'absolute',\n          top: 10 + item[2],\n          left: item[1]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }) : 'empty';\n      return elem;\n    });\n    const soldierArr = tempsoldierArr.filter(item => item !== 'empty');\n    const bulletarray = this.state.bullets.map(item => React.createElement(\"div\", {\n      className: \"bullet\",\n      key: item,\n      style: {\n        top: item[1] - 10 + Math.abs(this.state.gunangle / 4.2),\n        left: 14 + this.state.gunangle * 15 / 45 + item[0]\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      className: \"game-window\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(Player, {\n      className: \"player\",\n      score: this.state.p1score,\n      playerName: \"Player 1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"screen\",\n      style: {\n        width: this.state.gameWidth\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(Pilot, {\n      position: this.state.pilotpos,\n      depth: this.state.pilotdepth,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }), soldierArr, React.createElement(Gun, {\n      angle: this.state.gunangle,\n      leftPos: this.state.frameStartPos + this.state.gameWidth / 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }), bulletarray, React.createElement(Info, {\n      resume: this.resume,\n      isPaused: this.state.isPaused,\n      isGameOver: this.state.isGameOver,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    })), React.createElement(Player, {\n      className: \"player\",\n      score: this.state.p2score,\n      playerName: \"Player 2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/vicky/workspace/2-player-react-game/frontend/src/App.js"],"names":["React","Pilot","Gun","Player","Info","openSocket","socket","id","keyCodeTimestamps","App","Component","constructor","frameUpdate","state","isPaused","setState","prev","p1","p1score","p2","p2score","speed","key39","pos","pilotpos","dec","key40","newdepth","pilotdepth","depth","newpilot","pilotnum","soldarr","soldiers","map","item","soldepth","round","gunangle","key65","key68","newbullets","bullets","filter","newreleased","soldiersReleased","frameEndPos","frameStartPos","arr","k","push","key76","str","isGameOver","c","it","length","alert","clearInterval","i","j","Math","abs","splice","gameWindowWidth","window","innerWidth","gameWidth","resume","bind","componentDidMount","setInterval","document","onkeydown","e","keyname","keyCode","startTimeStamp","Date","now","onkeyup","newlist","endTimestamp","player","emit","bull","deg","PI","sin","cos","render","tempsoldierArr","elem","position","top","left","soldierArr","bulletarray","width"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Pilot from './Pilot'\nimport Gun from './Gun'\nimport Player from './Player'\nimport Info from './Info'\nimport openSocket from 'socket.io-client';\nconst socket = openSocket('http://localhost:55550');\n\nvar id\nvar keyCodeTimestamps = {};\n\nclass App extends React.Component{\n  constructor(){\n    super()\n    let gameWindowWidth = 800;\n    let arr=[]\n    for(let i=0;i<20;i++){\n      arr.push([false, 0, 10])\n    }\n    this.state={\n      p1score: 0,\n      p2score: 0,\n      round: 1,\n      pilotpos: (window.innerWidth - gameWindowWidth)/2,\n      pilotdepth: 10,\n      pilotnum: 0,\n      key39: false,\n      key40: false,\n      key65: false,\n      key68: false,\n      key76: false,\n      soldiers: arr,\n      soldiersReleased: 0,\n      gunangle: 0,\n      bullets: [],\n      frameStartPos: 0,\n      frameEndPos: gameWindowWidth,\n      gameWidth: gameWindowWidth,\n      isPaused: true,\n      isGameOver: false\n    }\n    this.resume = this.resume.bind(this);\n  }\n\n  resume() {\n    this.setState({\n      isPaused: false\n    })\n  }\n\n\n  frameUpdate = () => {\n    if(!this.state.isPaused) {\n      this.setState(prev => {\n        \n        let p1=prev.p1score\n        let p2=prev.p2score\n        const speed=prev.key39?8:5\n        let pos=prev.pilotpos+speed\n        const dec=prev.key40?1:0\n        let newdepth=prev.pilotdepth+dec\n        let depth=newdepth>=150?150:newdepth\n        let newpilot=prev.pilotnum\n        let soldarr=prev.soldiers.map(item => {\n          if(item[0])\n          {\n            let soldepth=item[2]+4\n            if(item[2]<700 && soldepth>=700)\n            {\n              if(prev.round===1)\n              {\n                p1+=2\n              }\n              if(prev.round===2)\n              {\n                p2+=2\n              }\n            }\n            soldepth=soldepth>=700?700:soldepth\n            return [true, item[1], soldepth]\n          }\n          else{\n            return item\n          }\n        })\n\n        let gunangle=prev.gunangle\n        if(prev.key65){\n          gunangle-=2\n        }\n        if(prev.key68){\n          gunangle+=2\n        }\n        gunangle=gunangle>=90?90:gunangle\n        gunangle=gunangle<=-90?-90:gunangle\n        \n        let newbullets=prev.bullets.map(item => [item[0]+10*item[2], item[1]-10*item[3], item[2], item[3]])\n        newbullets=newbullets.filter(item => item[0]<1550 && item[0]>0 && item[1]>0)\n        let newreleased=prev.soldiersReleased\n\n        if(pos>prev.frameEndPos && newpilot<4){\n          pos=prev.frameStartPos\n          depth=10\n          newpilot+=1\n          newreleased=newpilot*4\n        }\n\n        if(pos>prev.frameEndPos && newpilot===4){\n          if(prev.round===1)\n          {\n            let arr=[]\n              for(let k=0;k<20;k++){\n                arr.push([false, 0, 10])\n              }\n              prev.isPaused = true;\n              return {p1score: p1,\n                p2score: p2,\n                round: 2,\n                pilotpos: prev.frameStartPos,\n                pilotdepth: 10,\n                pilotnum: 0,\n                key39: false,\n                key40: false,\n                key65: false,\n                key68: false,\n                key76: false,\n                soldiers: arr,\n                soldiersReleased: 0,\n                gunangle: 0,\n                bullets: []} \n\n          }\n          if(prev.round===2)\n          {\n            const str=p1>p2?1:2\n              prev.isGameOver = true\n              prev.isPaused = true\n          }\n          \n        }\n\n        let c=0\n        for(let it=0;it<soldarr.length; it++)\n        {\n          if(soldarr[it][0] && soldarr[it][2]>=700)\n          {\n            c++\n          }        \n        }\n        if(c>=4)\n        {\n          if(prev.round===1)\n          {\n            p1+=50\n            let arr=[]\n              for(let k=0;k<20;k++){\n                arr.push([false, 0, 10])\n              }\n              prev.isPaused = true;\n              return {p1score: p1,\n                p2score: p2,\n                round: 2,\n                pilotpos: prev.frameStartPos,\n                pilotdepth: 10,\n                pilotnum: 0,\n                key39: false,\n                key40: false,\n                key65: false,\n                key68: false,\n                key76: false,\n                soldiers: arr,\n                soldiersReleased: 0,\n                gunangle: 0,\n                bullets: []} \n\n          }\n          if(prev.round===2)\n          {\n            p2+=50\n            const str=p1>p2?1:2\n              alert('Player 1: '+p1+'    Player 2: '+p2)\n              alert('Game Over!! Payer '+str+ ' wins! Plese Refresh')\n              clearInterval(id)\n          }\n        }\n        \n        for(let i=0;i<newbullets.length;i++)\n        {\n\n          for(let j=0;j<soldarr.length;j++)\n          {\n            if(soldarr[j][0] && soldarr[j][2]<700 && Math.abs(newbullets[i][0]-soldarr[j][1])<10 && Math.abs(newbullets[i][1]-soldarr[j][2])<10)\n            {\n              soldarr[j][0]=false\n              if(prev.round===1)\n              {\n                p2+=1\n              }\n              if(prev.round===2)\n              {\n                p1+=1\n              }\n            }\n          }\n\n          if(Math.abs(newbullets[i][0]-pos)<30 && Math.abs(newbullets[i][1]-depth)<10)\n          {\n            if(prev.round===1)\n            {\n              p2+=5            \n            }\n            if(prev.round===2)\n            {\n              p1+=5            \n            }\n            newbullets.splice(i,1)          \n            if(newpilot===4 && prev.round===1){\n              let arr=[]\n              for(let k=0;k<20;k++){\n                arr.push([false, 0, 10])\n              }\n              depth=-500\n              prev.isPaused = true;\n              return {p1score: p1,\n                p2score: p2,\n                round: 2,\n                pilotpos: prev.frameStartPos,\n                pilotdepth: 10,\n                pilotnum: 0,\n                key39: false,\n                key40: false,\n                key65: false,\n                key68: false,\n                key76: false,\n                soldiers: arr,\n                soldiersReleased: 0,\n                gunangle: 0,\n                bullets: []}            \n            }\n            if(newpilot===4 && prev.round===2){\n              depth=-500\n              const str=p1>p2?1:2\n              alert('Player 1: '+p1+'    Player 2: '+p2)\n              alert('Game Over!! Payer '+str+ ' wins! Plese Refresh') \n              clearInterval(id)\n            }\n            if(newpilot<4){\n              pos=prev.frameStartPos\n              depth=10\n              newpilot+=1\n              newreleased=newpilot*4\n            }\n          }\n        }\n\n        return {pilotpos: pos, pilotdepth:depth, pilotnum: newpilot, soldiers: soldarr, gunangle:gunangle, bullets: newbullets, p1score: p1, p2score: p2, soldiersReleased: newreleased}\n      })\n    }\n  }\n\n  componentDidMount(){\n    id=setInterval(this.frameUpdate, 40)\n    document.onkeydown = (e) => {\n      const keyname='key'+e.keyCode\n      if((e.keyCode===39 || e.keyCode===40 || e.keyCode===68 || e.keyCode===65) && !this.state.isPaused){\n        this.setState({[keyname]: true})\n        keyCodeTimestamps[keyname] = {};\n        keyCodeTimestamps[keyname].startTimeStamp = Date.now();\n      }\n      else if(e.keyCode===32 || e.keyCode === 76){\n        keyCodeTimestamps[keyname] = {};\n        keyCodeTimestamps[keyname].startTimeStamp = Date.now();\n      }\n    }\n    document.onkeyup = (e) => {\n      const keyname='key'+e.keyCode\n      if(!this.state.isPaused && e.keyCode===76 && this.state.soldiersReleased<this.state.pilotnum*4+4)\n      {\n        this.setState(prev => {\n          let newlist=prev.soldiers.map(item => item)\n          newlist[prev.soldiersReleased]=[true, prev.pilotpos, prev.pilotdepth]\n          return {soldiersReleased: prev.soldiersReleased+1, soldiers: newlist}\n        })\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 2\" : \"Player 1\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if(!this.state.isPaused && e.keyCode===32)\n      {\n        this.setState(prev => {\n          let bull=prev.bullets\n          const deg=(this.state.gunangle*Math.PI)/180\n          bull.push([this.state.frameStartPos + (this.state.gameWidth / 2), 700, Math.sin(deg), Math.cos(deg)])\n          return {bullets: bull}\n        })\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 1\" : \"Player 2\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if(!this.state.isPaused && (e.keyCode===39 || e.keyCode===40)){\n        const keyname='key'+e.keyCode\n        this.setState({[keyname]: false})\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 2\" : \"Player 1\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n\n      if(!this.state.isPaused && (e.keyCode===68 || e.keyCode===65)){\n        const keyname='key'+e.keyCode\n        this.setState({[keyname]: false})\n        keyCodeTimestamps[keyname].endTimestamp = Date.now();\n        keyCodeTimestamps[keyname].keyCode = keyname;\n        keyCodeTimestamps[keyname].player = this.state.round === 1 ? \"Player 1\" : \"Player 2\";\n        socket.emit('recordKey', keyCodeTimestamps[keyname]);\n      }\n    }\n  }\n\n  render(){\n    let tempsoldierArr=this.state.soldiers.map(item => {\n      const elem=item[0]?<div className='soldier' key={item} style={{position: 'absolute', top: 10 + item[2], left: item[1]}}></div>:'empty'\n      return elem\n    })\n    const soldierArr=tempsoldierArr.filter(item => item!=='empty')\n    const bulletarray=this.state.bullets.map(item => <div className='bullet' key={item} style={{top: item[1] - 10 + Math.abs(this.state.gunangle/4.2), left: 14 + (this.state.gunangle*15/45) + item[0]}}></div>)\n    return(\n      <div className=\"game-window\">\n        <Player className=\"player\" score={this.state.p1score} playerName={\"Player 1\"}></Player>\n        <div className='screen' style={{width: this.state.gameWidth}}>\n          <Pilot position={this.state.pilotpos} depth={this.state.pilotdepth} />\n          {soldierArr}\n          <Gun angle={this.state.gunangle} leftPos={this.state.frameStartPos + (this.state.gameWidth / 2)} />\n          {bulletarray}\n          <Info resume={this.resume} isPaused={this.state.isPaused} isGameOver={this.state.isGameOver}></Info>\n        </div>\n        <Player className=\"player\" score={this.state.p2score} playerName={\"Player 2\"}></Player>\n      </div>\n    )\n  }\n}\n\n\nexport default App"]},"metadata":{},"sourceType":"module"}